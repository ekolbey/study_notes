\documentclass[a4paper]{article}
\usepackage[utf8]{inputenc}

\usepackage{graphicx, url}

\usepackage{amsmath, amsfonts, xfrac}
\usepackage{mathtools}

\newcommand{\obj}[1]{{\left\{ #1 \right \}}}
\newcommand{\clo}[1]{{\left [ #1 \right ]}}
\newcommand{\clop}[1]{{\left [ #1 \right )}}
\newcommand{\ploc}[1]{{\left ( #1 \right ]}}

\newcommand{\brac}[1]{{\left ( #1 \right )}}
\newcommand{\induc}[1]{{\left . #1 \right \vert}}
\newcommand{\abs}[1]{{\left | #1 \right |}}
\newcommand{\nrm}[1]{{\left\| #1 \right \|}}
\newcommand{\brkt}[1]{{\left\langle #1 \right\rangle}}
\newcommand{\floor}[1]{{\left\lfloor #1 \right\rfloor}}

\newcommand{\Real}{\mathbb{R}}
\newcommand{\Cplx}{\mathbb{C}}
\newcommand{\Pwr}{\mathcal{P}}
\newcommand{\Ical}{\mathcal{I}}

\newcommand{\Ctx}{\mathbb{K}}
\newcommand{\Pat}{\mathbb{P}}
\newcommand{\supp}{\text{supp}}
\newcommand{\conf}{\text{conf}}


\newcommand{\defn}{\mathop{\overset{\Delta}{=}}\nolimits}

\usepackage[english, russian]{babel}
\newcommand{\eng}[1]{\foreignlanguage{english}{#1}}
\newcommand{\rus}[1]{\foreignlanguage{russian}{#1}}

\title{Ordered structures in Data Analysis}
\author{Nazarov Ivan, \rus{101мНОД(ИССА)}\\the DataScience Collective}

\begin{document}
\maketitle

\selectlanguage{english}
\part{First module} % (fold)
\label{prt:first_module}

\selectlanguage{russian}
Пусть задан формальный контекст $\Ctx = \brac{\mathbb{G}, \mathbb{M}, \mathcal{R}}$, где $\mathbb{G} = \obj{1,\,\dots,\,8}$ -- объекты, $\mathbb{M} = \obj{a,\,b,\,\ldots,\,i}$ -- признаки, а $\mathcal{R}$ -- бинарное отношение, такое что $(g,m)\in \mathcal{R}$ тогда и только тогда, когда объект $g$ обладает признаком $m$.

Пусть множественное отображение $f^*:\Pwr(\mathbb{G})\to \Pwr(\mathbb{M})$ для любого $A\subseteq \mathbb{G}$ задано как \[f^*\brac{A}\defn \obj{\induc{ m\in \mathbb{M} }\,\forall g\in A,\,\brac{g,m}\in \mathcal{R}}\] а отображение $f_*:\Pwr(\mathbb{M})\to \Pwr(\mathbb{G})$ для любого $B\subseteq \mathbb{M}$ как \[f_*\brac{B}\defn \obj{\induc{ g\in \mathbb{G} }\,\forall m\in B,\,\brac{g,m}\in \mathcal{R}}\] Такая пара задаёт отображение Галуа на частично упорядоченных множествах $\mathbb{G}$ и $\mathbb{M}$ относительно естественного порядка вложения подмножеств на каждом из них.

Свойства этих отображений позволяют задать на подмножествах операцию замыкания. Во-первых, данные отображения $f^*$ и $f_*$ антимонотонны в том смысле, что $\phi\brac{B}\subseteq \phi\brac{A}$ если $A\subseteq B$. Во-вторых, для любых $A\subseteq \mathbb{G}$ и $B\subseteq \mathbb{M}$ для них справедливо следующее утверждение: \[A\subseteq f_*\brac{B} \Leftrightarrow\, B\subseteq f^*\brac{A}\] И в-третьих, благодаря вышеуказанным свойствам композиции $f_*\circ f^*: \Pwr(\mathbb{G})\to \Pwr(\mathbb{G})$ и $f^*\circ f_*: \Pwr(\mathbb{M})\to \Pwr(\mathbb{M})$ обладают тремя определяющими свойствами оператора замыкания: \begin{itemize}
\item для любых $X\subseteq \Omega$ справедливо $X\subseteq \text{cl}\brac{X}$
\item для любых $X\subseteq Y$ выполнено $\text{cl}\brac{X}\subseteq \text{cl}\brac{Y}$
\item $\text{cl}\brac{\text{cl}\brac{X}}=\text{cl}\brac{X}$ для любых $X\subseteq \Omega$
\end{itemize} Пусть $\text{cl}_{\mathbb{G}} \defn f_*\circ f^*$ и $\text{cl}_{\mathbb{M}} \defn f^*\circ f_*$ операторы замыкания для множеств объектов $\mathbb{G}$ и атрибутов $\mathbb{M}$ соответственно.

Формальным понятием контекста $\Ctx$ является пара $(A,B)$ подмножеств $\mathbb{G}$ и $\mathbb{M}$ соответственно, для которых справедливо, что $A=f^*\brac{B}$ и $B=f_*\brac{A}$. На самом деле можно показать, что в силу корректности определения отображения Галуа и благодаря свойствам оператора замыкания, пара является формальным понятием тогда и только тогда когда $\text{cl}_{\mathbb{G}}\brac{A} = A$ (и соответственно $\text{cl}_{\mathbb{M}}\brac{B} = B$).

Для формальных понятий $(A_1,B_1)$ и $(A_1,B_1)$ из базовых свойств отображений $f^*$ и $f_*$ вытекает, $A_1\subseteq A_2$ тогда и только тогда, когда $B_2\subseteq B_1$. На основании этого наблюдения на множестве формальных понятий естественно ввести частичный $\preceq$ на основе вложения подмножества, причём неважно на объектной или аттрибутивной части понятия. 

Пусть $(A_1,B_1)$ и $(A_1,B_1)$ формальные понятия. Тогда из свойств оператора замыкания $\text{cl}_{\mathbb{G}}$ на множестве объектов вытекает $A_1\cap A_2\subseteq \text{cl}_{\mathbb{G}}\brac{A_1\cap A_2}$, и что $\text{cl}_{\mathbb{G}}\brac{A_1\cap A_2}\subseteq \text{cl}_{\mathbb{G}}\brac{A_1}, \text{cl}_{\mathbb{G}}\brac{A_2}$, откуда из того, что $A_1$ и $A_2$ замкнуты, вытекает $\text{cl}_{\mathbb{G}}\brac{A_1\cap A_2}\subseteq A_1\cap A_2$. Аналогичное свойство выполняется для атрибутов формальных понятий: \[B_1\cap B_2 \subseteq \text{cl}_{\mathbb{M}}\brac{B_1\cap B_2} \subseteq B_1\cap B_2\] Это наблюдение, в совокупности со свойствами оператора пересечения множеств, позволяет определить на частично упорядоченном множестве формальных понятий операторы инфимума и супремума следующим образом: \begin{align*}
	\brac{A_1, B_1}\vee \brac{A_2, B_2} &\defn \brac{f^*\brac{B_1\cap B_2}, B_1\cap B_2}\\
	\brac{A_1, B_1}\wedge \brac{A_2, B_2} &\defn \brac{A_1\cap A_2, f_*\brac{A_1\cap A_2}}\\
\end{align*}
Непосредственно проверяется тот факт, что операторы, заданные таким образом, определяют решётку на частично упорядоченном множестве формальных понятий контекста.

% part first_module (end)


\selectlanguage{english}
\part{Second module} % (fold)
\label{prt:second_module}

\section{Implications} % (fold)
\label{sec:implications}
% 1. Импликации

Let $\Ctx = \brac{G,M,I}$ be a binary context and ${(\cdot)}'$ be its derivation rule (Galois connection operator). For any $A,B\subseteq M$ an implication $A\to B$ is valid in $\Ctx$ if $A'\subseteq B'$. Implication $A\to B$ means that for each $g\in G$ with $A\subseteq g'$ it is true that $B\subseteq g'$. Finally $A\to B$ if and only if $B\subseteq A''$.

% Suppose $\mathcal{L}$ is a collection of implications of $ $


% Инфимум признаковых понятий

\subsection{Armstrong rules} % (fold)
\label{sub:armstrong_rules}
% 1.1. Правила Армстронга
Armstrong rules are like axiomatic schemes in propositional calculus but in the context of formal concept analysis. These rules define the framework for \emph{attribute logic}
\begin{enumerate}
	\item $\models A\to A$ -- self-evident.
	\item $A\to B\models A\cup X\to B$\hfill\[\brac{A\cup X}' = A'\cap X'\subseteq A'\subseteq B'\]
	\item $A\to B, A\to C\models A\to B\cup C$\hfill\[A'\subseteq B', C' \implies A'\subseteq B'\cap C' = \brac{B\cup C}'\]
	\item $A\to B, B\cup X\to Z\models A\cup X\to Z$\hfill
	\[ A'\subseteq B'\implies \brac{A\cup X}' = A'\cap X'  \subseteq B'\cap X' = \brac{B\cup X}' \subseteq Z'\]
	\item $A\to B\models A\to B\setminus A$\hfill \[B = (B\setminus A) \cup B\cap A \implies A'\subseteq B' = \brac{B\setminus A}' \cap \brac{B\cap A}'\subseteq \brac{B\setminus A}'\]
\end{enumerate}

% subsection armstrong_rules (end)

\subsection{Generator basis} % (fold)
\label{sub:generator_basis}
% 1.3. Генераторные базисы, базис Д-Г

Let $A\subseteq M$ be some closed set (a formal intent), i.e $A'' = A$. Any set $D\subseteq A$ with $D'' = A''$ is a \emph{generator} of $A$. The collection of all generators of $A$ is \[\text{gen}(A) \defn \obj{\induc{D\subseteq A}\, D'' = A'' }\]

Any $D\in \text{gen}(A)$ is a \emph{minimal generator} if $E'' \neq D''$ for any $E\subset D$. The collection of all minimal generators of $A$ is \[\text{mingen}(A) \defn \obj{ \induc{D\in \text{gen}(A)}\, \forall E\subset D\, E\notin \text{gen}(D'')}\]

A generator $D\in\text{gen}(A)$ is non-trivial if $D\neq D''$. All non-trivial minimal generators of $A$ are gathered in the following collection \[\text{nmingen}(A) \defn \obj{\induc{D\in\text{mingen}(A)}\,D\neq D'' }\]

A generator basis of implications of $\Ctx$ is defined as \[\text{GENbas}(\Ctx)\defn \obj{\induc{ X\to \brac{X''\setminus X} }\, X\subseteq M,\, X\in \text{nmingen}(X'')}\] Hence in order to construct the generator vasis of implications it is necessary to compute all closed subsets of $M$, which is equivalent to obtaining all formal concepts of $\Ctx$, and then for each \textbf{formal intent} $B\subseteq M$, find all non-trivial minimal generators $\text{mingen}(B)$.


% subsection generator_basis (end)

\subsection{Pseudo-intents, Duquenne–Guigues basis} % (fold)
\label{sub:pseudointents}
% 1.2. Псевдосодержания
% 1.3. Генераторные базисы, базис Д-Г

Consider a context $\Ctx=\brac{G,M,I}$. A subset $P\subseteq M$ is a pseudo-intent of $\Ctx$ if $P\neq P''$ and $Q''\subseteq P$ for every pseudo-intent $Q\subseteq P$ and $Q\neq P$.

Duquenne–Guigues basis, or the stem base, of attribute implications is defined as \[\text{DQbas}(\Ctx)\defn \obj{\induc{ P\to \brac{P''\setminus P} }\, P \text{-- pseudo-intent} }\]

Seminars covered a brute force algorithm for constructing all pseudo-intents which is a carbon copy of the recursive definition given in this section. Let $P\subseteq M$ be the subset which is currently being considered: \begin{description}
	\item[Start] \hfill\\ If $\emptyset\neq \emptyset''$ then the smallest pseudo-intent is $\emptyset$. Then it is pointless to consider subsets of $M$ not including elements from $\emptyset''$ (see rule \#2).
	\item[General step] \hfill\\ Consider subsets of $M$ in order of their cardinality. If $P$ is a pseudo-intent then compute the implication $P\to P''\setminus P$.
	\item[Rule \#1]\hfill\\ If $P$ is equal to the closure of a strictly smaller $Q$, obtained at some previous step, then $P=P''$ and is not a pseudo-intent.
	\item[Rule \#2]\hfill\\ If $P$ contains a pseudo-intent $Q$, but not $Q''\setminus Q$, then $P$ is not a pseudo-intent.
	% \item[Rule \#3]\hfill\\ There definitely was a third rule here...
\end{description}
% subsection duquenne_guigues_basis (end)

\subsection{Lazy classification} % (fold)
\label{sub:lazy_classification}
% 1.4. Ленивая классификация

Lazy classification has its roots in democratic voting. It can be used if one doesn't want to compute an complete implication base.

Consider a binary context $(\Gamma, M, \Ical)$. This is the universal formal context, which contains descriptions of every objects. Let $G$ be a strict subset of $\Gamma$ know as the learning sample of objects. The restriction $I$ of the binary relation $\Ical$ to $G$ (technically to $G\times M$) is defined as $(g,m)\in I$ if and only if $(g,m)\in \Ical$ and $g\in G$. This produces a learning context $\Ctx = (G,M,I)$ with the usual derivation operator ${(\cdot)}'$ (the pair of Galois operators).

Suppose there is a non-trivial partition (a set of classes) of $\brac{G_c}_{c\in \mathcal{C}}$ of $G$ for some non-empty set of classes $\mathcal{C}$ with $\abs{\mathcal{C}}\geq 2$. For every $c\in \mathcal{C}$ define the following set of alternative objects $G_{-c} \defn G\setminus G_c$.

Let $f\in \Gamma\setminus G$ be a new object which is yet to be classified, i.e. assigned some $c\in \mathcal{C}$. An object $g\in G_c$ votes for $c$ if there is no $h\in g_{-c}$ such that $g' \cap f'\subseteq h'$. The collection of votes for $c$ is defined as \[V_c(f) \defn\obj{ \induc{ g\in G_c }\, \not\exists h\in G_{-c}\text{ with } g' \cap f'\subseteq h' }\] The ``electoral support'' of $f$ for $c$ is then $S_c(f)\defn \frac{V_c(f)}{\abs{G_c}}$.

A simple collective decision to assign $f$ a class $c\in \mathcal{C}$ if done in the following way: $f$ is assigned to a class $c$ if $S_c(f) > S_k(f)$ for all $k\in \mathcal{C}$, $k\neq c$. It is very likely that the collective vote cannot assign a particular class to a new object. If the reason is that electoral support is overwhelming, $S_c(f)=1$, for all $c\in \mathcal{C}$, then $f$ is contradictory. Indecision for any other reason is means that $f$ is undetermined.


% JSM method is described here
% For each $c\in \mathcal{C}$ define the sub-context $\Ctx_c$ of $\Ctx$ as a triple $(G_c,M,I_c)$, where $I_c\subseteq G_c\times M$ is a restriction of $I$ from $G\times M$ to $G_c\times M$. The derivation rules are ${(\cdot)}^c$ for each context $\Ctx_c$.


% subsection lazy_classification (end)

\section{Association rules} % (fold)
\label{sec:association_rules}
% 2. Ассоциативные правила

Let $\Ctx=\brac{G,M,I}$ be a context. An association rule of $\Ctx$ is an expression $A\to B$ where $A,B\subseteq M$ are arbitrary. Obviously any implication of $\Ctx$ is an association rule.

The \emph{support} of an association rule $A\to B$ is the ratio of objects, having attributes from both $A$ and $B$:\[\supp\brac{A\to B} = \defn \frac{\abs{\brac{A\cup B}'}}{\abs{G}}\] If $A,B\subseteq M$ are such that $A\subseteq B$, then basic properties of ${(\cdot)}'$ imply that $B'\subseteq A'$, whence $\supp(B)\leq \supp(A)$.

The \emph{confidence} an association rule is defined as \[\conf\brac{A\to B} = \defn \frac{\abs{\brac{A\cup B}'}}{\abs{A'}}\] Any implication of $\Ctx$ has confidence 1, since $A\to B$ is equivalent to $A'\subseteq B'$, which implies $\brac{A\cup B}' = A'$.

The Luxenburger basis of associative rules for the context $\Ctx$ is the following collection of \[\obj{\induc{ \text{mingen}(B)\to D'' }\,(A,B)\prec(C,D),\,(C,D),(A,B)\in \Ctx}\]

Usually the goal of association rule mining is to find all \emph{frequent} association rules with \emph{sufficient} confidence. A rule $A\to B$ is considered frequent and sufficiently confident if $\supp\brac{A\to B}\geq \alpha$ and $\conf\brac{A\to B}\geq \beta$ for a priori given thresholds $\alpha,\beta\in \clo{0,1}$.

General strategy of finding such rules is described below:
\begin{description}
	\item[Step 1] Find all intents $B$ with $\supp(B)\geq \alpha$
	\item[Step 2] For each closure $B$ find all maximal sub-intents $\brac{A_i}_{i\in I}\subseteq B$ with $\conf\brac{A_i\to B}\geq \beta$.
	\item[Step 3] For each sub-intent found in the previous step, compose rules of the form $F\to B$ for all $F\in \text{mingen}(A_i)$.
\end{description}

The definition is correct since $(A,B)$ is a formal concept of $\Ctx$ if and only if $A=A''$.

The relation $\prec$ on a partial order $(P,\leq)$ is defined as: $a\prec b$ if and only if $a < b$ and there is no $x\in P$ with $a < x < b$.


\subsection{Confidence, support} % (fold)
\label{sub:confidence_support}
% 2.1. Достоверность, поддержка
% Ami book: p.~125-
% subsection confidence_support (end)

\subsection{Hypotheses} % (fold)
\label{sub:hypotheses}
% 2.2. Гипотезы

% subsection hypotheses (end)

\subsection{Association rule confidence -- lattice representation} % (fold)
\label{sub:association_rule_confidence_lattice_representation}
% 2.3. Достоверность ассоциативного правила - представление в решетках

% subsection association_rule_confidence_lattice_representation (end)

% section association_rules (end)

% section implications (end)

\section{Multi-valued contexts} % (fold)
\label{sec:multi_valued_contexts}
% none

Consider $\Ctx=\brac{G,M,W,I}$ -- a multi-valued contexts, with $I\subseteq G\times M\times W$ such that $(g,m,w_1)\in I$ and $(g,m,w_2)\in I$ implies $w_1=w_2$ (i.e. correspondence $I$ defines a map $I:G\times M\to W$). The context $\Ctx$ is complete if for all $g\in G$ and $m\in M$ there is $w\in W$ with $(g,m,w)\in I$. For any $g\in G$, $m\in M$ let $g(m)=m(g)=w$ for $w\in W$ with $(g,m,w)\in I$.


\subsection{Functional dependence} % (fold)
\label{sub:functional_dependence}
% 5. Функциональные зависимости (в т.ч. через решетку разбиений)
A set $Y\subseteq M$ is said to be \emph{functionally dependent} on $X\subseteq M$, $X\Rightarrow Y$, if for every $g,h\in G$ \[ \brac{ \forall m\in X,\,m(g)=m(h) } \implies \brac{ \forall n\in Y,\,n(g)=n(h) } \]
Can there be function dependence of the form $\emptyset \Rightarrow Y$ for any $Y\subseteq M$? Formally $\emptyset \Rightarrow Y$ is legitimate, since the implication is true ad vacuo.

In other words $Y$ is \emph{functionally dependent} on $X$ if and only if there exists a ``vector'' map $f: W^X\to W^Y$ such that for all $g\in G$ \[f\brac{\brac{m(g)}_{m\in X}} = \brac{n(g)}_{n\in Y}\] 

Consider a many-valued context $\brac{G,M,W,I}$ and define the following binary relation $I_F$ on $\Pwr_2{(G)}\times M$ as \[\brac{\obj{g,h},m}\in I_F \Leftrightarrow m(g)=m(h)\] where $\Pwr_2{(G)}$ is a collection of all two-element subsets of $G$. Then the following translation is true \begin{description}
	\item[Theorem]:\hfill \\
	$Y$ is functionally dependent on $S$ in $\brac{G,M,W,I}$ if and only if for the context $\mathbb{F} = \brac{\Pwr_2{(G)}, M, I_F}$ it is true that $\mathbb{F}\models X\to Y$.
\end{description}
Therefore the task of mining functional dependencies in many-valued contexts can be reduced to mining implications in a translated context.

% subsection functional_dependence (end)

\subsection{Context transformation} % (fold)
\label{sub:context_transformation}
% 3. Построение многозначного контекста из бинарного и наоборот

Scale context of an attribute $m\in M$ is $\mathbb{S}_m\defn \brac{W_m, G_m, I_m}$ defined as $m(G) \subseteq W_m$ and $I_m\defn \obj{ \induc{(g,w)}\,(g,m,w)\in I }$.

THIS SECTION ID POORLY WRITTEN!!!

% subsection context_transformation (end)

\subsection{Biclusters} % (fold)
\label{sub:biclusters}
% 6. Бикластеры
Consider a many-valued context $\Ctx=\brac{G,M,W,I}$ and suppose there is a tolerance\footnote{Tolerance is a reflexive and symmetric binary relation} relation on $W$. If $W\subseteq \Real$, then $(w_1,w_2)\in T_\theta$ if and only if $\abs{w_1-w_2}\leq \theta$ for some parameter $\theta$.

A bicluster is a pair $(A,B)$, where $A\subseteq G$ and $B\subseteq M$ with similar values of $W$:\[\forall g,h\in A,\, \forall m\in B,\,\brac{m(g), m(h)}\in T\]

A bicluster is \emph{not maximal} if there is $g\notin A$ such that $\brac{A\cup\obj{g},B}$ is a bicluster, or $\exists m\notin B$ so that $\brac{A,B\cup\obj{m}}$ us a bicluster.

% subsection biclusters (end)

% section multi_valued_contexts (end)

\section{JSM-method} % (fold)
\label{sec:dsm_method}
% 4. ДСМ-метод

JSM method is based on the following principle: %% See the lecture

Let $M$ be a set of structured attributes, and $w\notin M$ as a designated target feature with values $\obj{+,-,?}$. The set of objects $G$ is partitioned according to the value $w$: $G=G_+\uplus G_? \uplus G_-$, -- of positive, undefined and negative example sets respectively. This partition brings about three contexts positive $\Ctx_+ = \brac{G_+,M,I_+}$, negative $\Ctx_- = \brac{G_-,M,I_-}$ and undefined $\Ctx_? = \brac{G_?,M,I_?}$ which define structural specifics of each type of examples. The derivation rules (Galois operators) are ${(\cdot)}^+$, ${(\cdot)}^-$ and ${(\cdot)}^?$ respectively.




\subsection{JSM on a binary context} % (fold)
\label{sub:dsm_on_a_binary_context}
% 4.1 ДСМ на бинарном контексте
% Ami book: p.~43-46,58-59,68-73
% Ami book: p.~60-66

определение гипотез, формализующее идею “достаточное условие принадлежности объекта к классу выражается максимальным общим подобъектом некоторых объектов данного класса (“сходством” этих объектов), таким, что он не является подобъектом какого-либо объекта другого класса”.

$H_+\subseteq g^\tau$

принцип достаточного ос-
нования принятия гипотез [49], согласно которому порожденные гипотезы
должны правильно классифицировать исходные положительные и отрица-
тельные примеры, т.е. положительные - положительно, а отрицательные -
отрицательно (правила классификации при этом имеют точно такой же вид
как и в случае классификации недоопределенных примеров). При невыпол-
нении этого условия считается, что порождение гипотез по обучающему
контексту не корректно, и множество исходных примеров нуждается в по-
полнении.

% subsection dsm_on_a_binary_context (end)

\subsection{JSM on non-binary scale} % (fold)
\label{sub:dsm_on_non_binary_scale}
% 4.2 ДСМ на небинарном со шкалированием

% subsection dsm_on_non_binary_scale (end)

\subsection{JSM on patterns structures} % (fold)
\label{sub:dsm_on_patterns_structures}
% 4.3 ДСМ на узорных структурах

% subsection dsm_on_patterns_structures (end)

\subsection{Application to graphs} % (fold)
\label{sub:application_to_graphs}
% 4.4 пример на графах (вроде точно будет в контрольной - Кузнецов говорил!)

% subsection application_to_graphs (end)

% section dsm_method (end)

\section{Version space} % (fold)
\label{sec:version_space}
% 7. Пространство версий (последняя лекция)

% section version_space (end)

\section{Pattern structures} % (fold)
\label{sec:pattern_structures}
% pp.~74-76,77, lecture 7

\subsection{Intro on semi-lattices} % (fold)
\label{sub:intro_on_semi_lattices}

Algebraically a semi-lattice is pair $(L, \diamond)$ such that $\diamond: L\times L \to L$ is idempotent, commutative and associative. Algebraic properties of $\diamond$ induce a partial order relation $\trianglelefteq$ on the semi-lattice.\footnote{ALso known as the natural lattice partial order.} This order, however depends on the semantics of the operation $\diamond$: in a meet semi-lattice for all $x,y\in L$ \[x \trianglelefteq y\text{ if and only if } x = x\diamond y\] while in a semi-lattice with join semantics for all $x,y\in L$ \[x \trianglelefteq y\text{ if and only if } x\diamond y = y\] Straightforward application of the basic properties of $\diamond$ imply that $\trianglelefteq$ is reflexive, anti-symmetric and transitive.

Consider a partially ordered set $(P, \leq)$. A supremum of $S\subseteq P$ is such $a\in P$ that $x\leq a$ for all $x\in S$ and for every $b\in P$ with $x\leq b$ for all $x\in S$ it is true that $a\leq b$. The definition of a supremum, if one exist, implies that it is unique, which means that it can be unambiguously denoted by $\sup S\in P$.

From the order set-theoretic approach, a join semi-lattice is a poset $(P, \leq)$ such that the supremum $\sup\obj{x, y}$ exists for every pair of $x, y \in P$. Direct analysis of the definition of the supremum and basic properties of the partial order $\leq$, naturally define an idempotent, associative and commutative operator $\sqcup$ on $P$ as $x\sqcup y \defn \sup\obj{x,y}$. Therefore algebraic and order set-theoretic definitions are in fact equivalent. A meet semi-lattice is defined similarly, but with an infimum operation: an infimum of $S\subseteq P$ is such $a\in P$ that $a\leq x$ for all $x\in S$ and for any $b\in P$ with $b\leq x$ for all $x\in S$ it is true that $b\leq a$.

A join semi-lattice $(P,\leq)$ is \emph{complete} if $\sup S$ exists for any subset $S\subseteq P$. Furthermore if $A\subseteq B\subseteq P$, then $x\leq \sup B$ for all $x\in A$ whence $\sup A\leq\sup B$. Thus an element $\perp \defn \sup \emptyset$ of $P$ must be the least element in $(P,\leq)$.

% subsection intro_on_semi_lattices (end)

\subsection{Semi-lattices of descriptions} % (fold)
\label{sub:semi_lattices_of_descriptions}

\subsubsection*{Subsets as descriptions} % (fold)
\label{ssub:subsets_as_descriptions}

For example, $(D,\Box) = \brac{\Pwr(M), \cup}$ -- a join semi-lattice of subsets of $M$. The lattice partial order $A\sqsubseteq B$ if and only if $A\Box B = B$ coincides with $A\subseteq B$: $A\cup B = B$ if and only if $A\subseteq B$. The naturally neutral element for $\cup$ is $\emptyset$, which implies that $\emptyset\subseteq B$ for all $B\subseteq M$. The partial order $A\subseteq B$ means that any entity which fits $A$ also fits $B$: the larger the volume of a description the more description instances it covers. The most general description is $M$ and the most pathologically specific is $\emptyset$. Note that in the $\Pwr(M)$ is actually a lattice under the usual set operations.

% subsubsection subsets_as_descriptions (end)

\subsubsection*{String descriptions} % (fold)
\label{ssub:string_descriptions}

Strings (sequences) serve as another example of a description semi-lattice. Indeed $\brac{S,\sqcap}$ with $\sqcap:S\times S\to S$ denoting the largest common prefix is a meet semi-lattice. The natural partial order $\alpha\sqsubseteq\omega$ on $S$, ``\alpha is a prefix of \omega'', in the context of descriptions, can be translated to $\alpha$ being less specific, restrictive, than $\omega$. In turn, the operation $\alpha\sqcap\omega$ produces a description, which is more general than both $\alpha$ and $\omega$. The empty string, $\epsilon$, is thus the most general description.

% subsubsection string_descriptions (end)

\subsubsection*{Interval descriptions} % (fold)
\label{ssub:interval_descriptions}

Consider a finite collection $V = \brac{v_i}_{i\in F}$, and define \[\Ical(V) \defn \obj{ \induc{ \clo{v_i, v_j} }\, i,j\in F}\] The collection $\Ical(V)$ is finite and closed under finite intersection. Intervals form a semi-lattice structure with join semantics. Indeed, define the join map $\sqcup:\Ical(V)\times\Ical(V)\to\Ical(V)$ for any $A,B\in\Ical(V)$ as follows: \[A\sqcup_m B \defn \bigcap\obj{ \induc{ I\in \mathcal{I}_m }\,A,B\subseteq I }\] The map $\sqcup$ is well-defined, since the collection $\Ical(V)$ is finite. Commutativity and idempotence of $\sqcup$ follow straight form the definition. As for associativity, it can be shown by appealing to properties of numerical maxima and minima on finite sets. The natural partial ordering on $\Ical(V)$ is set-inclusion, and the semi-lattice order relation coincides with it. Indeed $A\sqsubseteq B$ if and only if $A\sqcup B = B$, is equivalent to $A\subseteq B$, meaning that $B$ is a covering of $A$.

Consider a finite many-valued numerical context $\brac{G,M,W,I}$, described in section~\ref{sec:multi_valued_contexts}. For any $m\in M$ put $\Ical_m \defn \Ical\brac{m(G)}$ and $\sqcup_m$ be the join map on $\Ical\brac{m(G)}$. Let \[D\defn \obj{\induc{\prod_{m\in M} I_m}\, I_m\in \mathcal{I}_m}\] and define the operator $\sqcup$ on $D$ as \[ A\sqcup B \defn \brac{A_m\sqcup_m B_m}_{m\in M}\] By construction $\sqcup$ is well-defined and satisfies algebraic requirements of a semi-lattice with join semantics. The natural order $d_1\sqsubseteq d_2$ on $(D,\sqcap)$ for any $d_1, d_2\in D$ represents the fact that the description $d_2$ is more general than $d_1$.

To allow descriptions like $\clo{a, +\infty}$ use $\bar{\Real}$ when necessary, or, even better, the topologically equivalent $\clo{-1,1}$ (homeomorphism between $\bar{\Real}$ and $\clo{-1,1}$). It is also possible to show that $(D,\cap,\sqcup)$ is a lattice.

% subsubsection interval_descriptions (end)

\subsection{Pattern Formal Concepts} % (fold)
\label{sub:pattern_formal_concepts}
% Ami book: p.~74-82

A pattern structure is a triple $\Pat=\brac{G,(D,\Box), \delta}$, where $G$ is a set of objects, $(D,\sqcup)$ is a semi-lattice of descriptions and $\delta: G\to D$ is an object-description mapping. Let the induced partial order on $(D,\sqcup)$ be denoted by $\sqsubseteq$. For any $d_1, d_2\in D$ the relation $d_1\sqsubseteq d_2$ represents the fact that the description $d_2$ is more general, or less specific, than $d_1$. Depending on the semantics of the description semi-lattice, the exact definition of this partial order may vary.

The derivation operators on $\Pat$, ${(\cdot)}^\diamond$, are defined as follows: \begin{align*}
	A^\diamond &\defn \bigsqcup_{g\in A} \delta(g)\\
	d^\diamond &\defn \obj{\induc{g\in G}\,\delta(g) \sqsubseteq d}
\end{align*}
The definition directly implies that ${(\cdot)}^\diamond$ is a Galois connection between posets $\brac{\Pwr(G),\subseteq}$ and $(D,\sqsubseteq)$.\footnote{See lecture 7 ``Pattern Structures on Graphs'', slide~20}
%% A^\diamond requires completeness



It is natural to assume existence of some $\epsilon \in D$, which represents an empty description, such that $\epsilon \sqsubset d$ for all $d\in D$ such that $d\neq \epsilon$. Furthermore no object in existence can have an empty description $\delta(g)\neq \epsilon$ for all $g\in G$. Algebraically $\epsilon$ is $\sqcup$-identity, a neutral element with respect to the operation $\sqcup$. In the pathological case $\emptyset^\diamond=\epsilon$.

The void description. The universal description

% subsection pattern_formal_concepts (end)



In view of simplifying algebraic derivations in the pattern structures, it might be necessary to define a description projection map $\pi:D\to D$, with the following properties:\footnote{See lecture 7 ``Pattern Structures on Graphs'', slide~28} \begin{description}
	\item[Monotonicity] \hfill\\ The projection operation does not increase specificity of a description: $x\sqsubseteq y$ implies $\pi(x)\subseteq \pi(y)$ for any $x,y\in D$;
	\item[Generalisation] \hfill\\ The projection of any description must be less specific that the original: $\pi(x)\sqsubseteq x$ for any $x\in D$;
	\item[Idempotence] \hfill\\ Projection of a projected description yields the same projection: $\pi\brac{\pi(x)} = \pi(x)$ for all $x\in D$.
\end{description}
In effect a projection is just a modification of the object-description mapping $\delta$: $\delta \Rightarrow \pi \circ \delta$. Monotonicity of $\pi$ and associativity of $\sqcup$ imply that $\pi\brac{x\sqcup y}\sqsubseteq \pi(x)\sqcup\pi(y)$, and generalisation and idempotence of $\pi$ with associativity of $\sqcup$ imply that \[\brac{\pi(x)\sqcup\pi(y)}\sqcup (x\sqcup y) = \brac{\pi(x)\sqcup x}\sqcup \brac{\pi(y)\sqcup y} = \pi(x)\sqcup \pi(y)\] whence $\pi(x)\sqcup\pi(y)\sqsubseteq x\sqcup y$. Therefore $\pi\brac{x\sqcup y} = \pi(x)\sqcup\pi(y)$.

% subsection semi_lattices_of_descriptions (end)

% section pattern_structures (end)

% part second_module (end)

\section{Appendix: A} % (fold)
\label{sec:appendix_a}

\subsection{String monoid} % (fold)
\label{sub:string_monoid}

Consider a set of finite-length sequences of symbols $S=\cup_{k\geq0} X^k$ from some finite alphabet $X$, $X^0 \defn \obj{ \epsilon }$ with $\epsilon$ denoting the empty string. By the set $X^\infty$ denote the set of infinite strings on $X$. For any $\alpha, \omega\in S$, $\alpha=\omega$ if and only if $\alpha_i = \omega_i$ for all $i\leq m, n$, where $\alpha\in X^n$ and $\beta\in X^n$.

For any $\alpha,\omega\in S$ denote a concatenation of $\alpha$ and $\omega$ by a string $\alpha\omega$. Technically concatenation is a family of maps $\brac{\vert_{mn}}_{m,n\geq 0}:X^m\times X^n\to X^{m+n}$ defined as follows: for any $\alpha\in X^n$ and $\omega\in X^m$ \[\vert_{mn}(\alpha,\omega) \defn \brac{ \brac{x_k}_{k=1}^{n+m} }\] with $x_k=\alpha_k$ for $k=1,\ldots,n$ and $x_k = \omega_{k-n}$ for $k={n+1},\ldots,{n+m}$. By construction concatenation is associative with $\epsilon$ as the neutral element. Finite length strings thus constitute a monoid.

\subsubsection{Prefix ordering} % (fold)
\label{ssub:prefix_ordering}

For any $\alpha,\omega \in S$ the string $\alpha$ is a \emph{prefix} of $\omega$, $\alpha\sqsubseteq\omega$, if there exists $\sigma\in S$ such that $\alpha\sigma=\omega$. Note that $\epsilon$ is a prefix of any string.

The operation $\sqsubseteq$ is a partial order. Indeed $\alpha\sqsubseteq\alpha$ since $\alpha = \alpha\epsilon$. If $\alpha\sqsubseteq \omega$ and $\omega \sqsubseteq \alpha$ then $\omega=\alpha$, since $\alpha\sigma_1=\omega$ and $\omega\sigma_2=\alpha$ imply that $\alpha\sigma_1\sigma_2 = \alpha$, whence from the definition of $=$ on strings follows that $\sigma_1\sigma_2=\epsilon$ and $\sigma_1=\sigma_2=\epsilon$. Finally, $\alpha\sqsubseteq\omega$ and $\omega\sqsubseteq\gamma$ imply that $\alpha\sigma_1=\omega$ and $\omega\sigma_2=\gamma$, whence $\alpha(\sigma_1\sigma_2)=\gamma$, and $\alpha\sqsubseteq\gamma$.

If $\alpha, \beta\in S$ are such that $\alpha,\beta\sqsubseteq \omega$, then the definition of $=$ and $\sqsubseteq$ imply that either $\alpha\sqsubseteq\beta$ or $\beta\sqsubseteq\alpha$ or both. Thus the set of prefixes of any string is a total order.

% subsubsection prefix_ordering (end)

\subsubsection{String semi-lattices} % (fold)
\label{ssub:string_semi_lattice}

There is semi-lattice structure in the space of finite strings. For any $\alpha,\omega\in S$ it is natural to consider the longest common prefix (LCP) $\alpha\sqcap \omega$. Basic properties of $\sqsubseteq$ imply that the $\alpha\sqcap \omega$, if it exists, is unique. For any prefix $x$ of both $\alpha$ and $\omega$ it is true that $x\sqsubseteq \beta \alpha\sqcap\omega$. Indeed, $\abs{x}\leq \abs{\beta}$ and $x\sigma = \beta\theta$ for some $\sigma,\theta\in S$, whence $x\gamma = \beta$ for $\gamma \defn \brac{\sigma_k}_{k=1}^{\abs{\beta}-\abs{x}}$.

Existence could be shown constructively by explicitly finding the first mismatching symbol in $\alpha$ and $\omega$. Another proof is done by noting that the intersection of finite totally ordered sets is a finite totally ordered set, finiteness of which implies that it must have a maximal element. Obviously, $\alpha\sqcap \omega\sqsubseteq \alpha,\omega$ for any $\alpha,\omega\in S$. 

The operation $\sqcap:S\times S\to S$ is idempotent, since $\alpha\sqsubseteq\alpha$ and $\alpha\sqcap \alpha \sqsubseteq \alpha$. It is commutative by definition and uniqueness. Associativity follows from maximality of the common prefix, very much like associativity of infimum follows from the aspects of its definition. It is worth noting, that $\alpha\sqcap \epsilon = \epsilon$ for any $\alpha\in S$, as $\epsilon\sqsubseteq \alpha$ always.

Suppose $\alpha = \alpha\sqcap\omega$. Then $\alpha\sqsubseteq \omega$ by definition of a prefix. Conversely, if $\alpha\sqsubseteq \omega$, then for $\alpha\sqsubseteq \alpha\sqcap\omega$ by maximality of the LCP and $\alpha\sqcap\omega\sqsubseteq\alpha$. Therefore $(S,\sqcap)$ is algebraically a semi-lattice, with meet semantics.

% subsubsection string_semi_lattice (end)

% subsection string_monoid (end)

% section appendix_a (end)



\section{Appendix: B} % (fold)
\label{sec:appendix_b}

\subsection{Knaster-Tarski Theorem} % (fold)
\label{sub:knaster_tarski_theorem}

%% Knaster-Tarski theorem see KT
Consider a partially ordered set $(P,\leq)$ and let $\phi:P\to P$ be an order homomorphism: $\phi(x) \leq \phi(y)$ for all $x,y\in P$ with $x\leq y$.

%%
Knaster-Tarski theorem states that if there is an element $x_0\in P$

Suppose there is some $x_0\in P$ with $\phi(x_0)\leq x_0$. Then the set \[\Gamma \defn \obj{ \induc{x\in P}\,\phi(x)\leq x}\] is non empty.

If $x\in \Gamma$, then $\phi(x)\leq x$. But by monotonicity $\phi\brac{\phi(x)}\leq \phi(x)$, whence $\phi(x)\in \Gamma$.

Let $\omega \defn \inf_{x\in \Gamma} x$. For every $x\in \Gamma$ it must be $\omega\leq x$ which by monotonicity implies that $\phi(\omega)\leq \phi(x)\leq x$. Thus $\phi(\omega)$ is a lower bound for $\Gamma$, whence by definition of $\inf$, $\phi(\omega)\leq \omega$. Therefore $\omega\in \Gamma$. The latter by definition means that $\phi(\omega)\leq \omega$, whence $\phi(\omega)\in \Gamma$. Since $\omega$ is a lower bound of $\Gamma$, it has to be true that $\omega \leq \phi(\omega)$, whence one has found $\omega = \phi(\omega)$

% subsection knaster_tarski_theorem (end)

% section appendix_b (end)

\end{document}
